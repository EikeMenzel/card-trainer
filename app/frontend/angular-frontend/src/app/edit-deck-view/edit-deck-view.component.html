<app-base-page [PageTitle]="this.pageTitle">

  <div class="container search-and-sort-container my-3">
    <!-- Return Button -->
    <div class="row align-items-center justify-content-start">
      <div class="col-md-6 col-lg-4">
        <button class="btn return-button" [routerLink]="'/deck/' + this.onClickReturn()">
          <fa-icon [icon]="faReply" class="fa fa-solid"></fa-icon>
          <span i18n>Return to Deck</span>
        </button>
      </div>
    </div>

    <!-- Search and Sort Bar -->
    <div class="row align-items-center justify-content-end mt-3">
      <!-- Search -->
      <div class="col-12 col-md-6 col-lg-3 mb-3">
        <div class="search-container align-items-center d-flex">
          <fa-icon [icon]="faSearch" class="custom-icon fa-l fa-solid"></fa-icon>
          <input type="text" i18n-placeholder placeholder="Search" class="form-control search-input custom-search-bar" i18n-aria-label aria-label="Search" [(ngModel)]="searchTerm" (ngModelChange)="onSearchChange()">
        </div>
      </div>

      <!-- Sort -->
      <div class="col-12 col-md-6 col-lg-3 mb-3">
        <div class="sort-container align-items-center d-flex">
          <fa-icon [icon]="faArrowUpZA" class="custom-icon fa-l fa-solid"></fa-icon>
          <select class="form-select sort-select custom-sort-bar" aria-label="Sort order" i18n-aria-label [(ngModel)]="sortOrder" (ngModelChange)="onSortOrderChange()">
            <option value="" disabled i18n>Sort by</option>
            <option value="oldest" selected>Oldest</option>
            <option value="newest" i18n>Newest</option>
            <option value="nameAsc" i18n>Name ascending</option>
            <option value="nameDesc" i18n>Name descending</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <table class="table container" id="list">
      <!-- <thead> -->
      <thead>
      <tr>
        <td class="text-start"><strong i18n>Question</strong></td>
        <td class="text-end"><strong i18n>Question Type</strong></td>
      </tr>
      </thead>

      <!-- <tbody> -->
      <tbody>

      <!-- Default list entries -->
      <tr *ngFor="let card of displayedCards" class="hover-highlight" routerLink="/deck/{{deckId}}/card/{{card.id}}/edit">
        <td class="align-middle">
          <span class="d-inline-block">{{card.question}}</span>
        </td>
        <td class="align-middle">
          <div class="row g-2 justify-content-end align-items-center">
            <div class="col-auto">{{card.type == 'BASIC' ? this.basicCardName : this.MCCardName}}</div>
            <div class="col-auto">

              <!-- Delete -->
              <ng-container *ngIf="showDelete">
                <a class="delete-button" (click)="deleteItem($event, card.id)">
                  <i class="bi-trash-fill text-danger"></i>
                </a>
              </ng-container>
            </div>
          </div>
        </td>
      </tr>

      <!-- If no cards have been created yet -->
      <ng-container *ngIf="displayedCards.length == 0">
        <tr>
          <td colspan="2" class="text-center">
            <p class="text-muted" i18n>No cards found! Create one ðŸ˜Š</p>
            <button class="btn menu-item menu-circle sub-add-button" routerLink="/deck/{{deckId}}/card/new/edit">
              <i class="bi-plus text-white"></i>
            </button>
          </td>
        </tr>
      </ng-container>
      </tbody>
    </table>
  </div>


  <div class="menu-wrapper">
    <div *ngIf="showOptions" class="options-panel">
      <button class="btn menu-item menu-circle sub-menu-circle sub-add-button"
              routerLink="/deck/{{deckId}}/card/new/edit">
        <i class="bi-plus text-white"></i>
      </button>
      <button class="btn btn-danger menu-item menu-circle sub-menu-circle" (click)="toggleDeleteItem()">
        <i class="bi-trash-fill text-white"></i>
      </button>
    </div>
    <button class="btn data-mdb-ripple-init menu-circle text-white main-menu-button"
            (click)="toggleOptions()"><i class="bi-list-ul"></i></button>
  </div>
</app-base-page>
